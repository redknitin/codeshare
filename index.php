<?php/*Copyright (C) K.N.Reddy 2012All Rights Reserved*/?><!doctype html><html>	<head>	<title>KNR CodeShare</title>	<link rel="stylesheet" href="style.css" />	</head>	<body>		<h1>KNR CodeShare</h1>		<?php include('menulinks.php'); ?>		<?php			include('config.php');			$flash_msg = array();						$conn= mysql_connect($dbhost, $dbuser, $dbpass);			if (!$conn) die(mysql_error());			if (!mysql_select_db($dbname, $conn)) die(mysql_error());									?>				<?php					if (isset($_POST['submit'])) {								$is_magic_quotes_gpc_enabled = get_magic_quotes_gpc();				if ($is_magic_quotes_gpc_enabled) {					$vals = array(					'name' => mysql_escape_string(stripslashes($_POST['name'])),					'url' => mysql_escape_string(stripslashes($_POST['url'])),					'code' => mysql_escape_string(stripslashes($_POST['code'])),					'note' => mysql_escape_string(stripslashes($_POST['note'])),					'codelang' => mysql_escape_string(stripslashes($_POST['codelang']))					);									} else {					$vals = array(					'name' => mysql_escape_string($_POST['name']),					'url' => mysql_escape_string($_POST['url']),					'code' => mysql_escape_string($_POST['code']),					'note' => mysql_escape_string($_POST['note']),					'codelang' => mysql_escape_string($_POST['codelang'])					);				}				
				$result = mysql_query("INSERT INTO pastebinshare(name, codelang, code, note, url) VALUES('${vals['name']}', '${vals['codelang']}', '${vals['code']}', '${vals['note']}', '${vals['url']}')");
				if (!$result) die(mysql_error());
				$flash_msg[] = 'Code posted';
			}
		?>
		
		<div id="recentcodeshare-wrapper">		<h2 id="recentcodeshare-heading">Recent</h2>
		<ul id="recentcodeshare">
		<?php
			$result = mysql_query('SELECT id, name, SUBSTRING(note, 1, 25) AS excerpt FROM pastebinshare ORDER BY id DESC LIMIT 5');
			if (!$result) die(mysql_error());

			while ($row = mysql_fetch_assoc($result)) {
				echo "<li><a href=\"view.php?id=${row['id']}\">${row['name']} - ${row['excerpt']}&#8230;</a></li>";
			}
			
			mysql_free_result($result);
		?>
		</ul>			</div>
		
		<?php
			mysql_close($conn);
		?>
		<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" class="formposttocodeshare">
			<label class="formposttocodeshare">Your Name</label>
			<input class="formposttocodeshare" type="text" name="name" />

			<label class="formposttocodeshare">URL (optional)</label>
			<input class="formposttocodeshare" type="text" name="url" />

			<label class="formposttocodeshare">Language</label>
			<select class="formposttocodeshare" name="codelang"><!--				<option value="4cs">GADV 4CS</option>				<option value="6502acme">MOS 6502 (6510) ACME Cross Assembler format</option>				<option value="6502kickass">MOS 6502 (6510) Kick Assembler format</option>				<option value="6502tasm">MOS 6502 (6510) TASM/64TASS 1.46 Assembler format</option>				<option value="68000devpac">Motorola 68000 - HiSoft Devpac ST 2 Assembler format</option>				<option value="abap">ABAP</option>				<option value="actionscript">ActionScript</option>				<option value="actionscript3">ActionScript 3</option>				<option value="ada">Ada</option>				<option value="algol68">ALGOL 68</option>				<option value="apache">Apache configuration</option>				<option value="applescript">AppleScript</option>				<option value="apt_sources">Apt sources</option>				<option value="arm">ARM ASSEMBLER</option>				<option value="asm">ASM</option>				<option value="asp">ASP</option>				<option value="asymptote">asymptote</option>				<option value="autoconf">Autoconf</option>				<option value="autohotkey">Autohotkey</option>				<option value="autoit">AutoIt</option>				<option value="avisynth">AviSynth</option>				<option value="awk">awk</option>				<option value="bascomavr">BASCOM AVR</option>				<option value="bash">Bash</option>				<option value="basic4gl">Basic4GL</option>				<option value="bf">Brainfuck</option>				<option value="bibtex">BibTeX</option>				<option value="blitzbasic">BlitzBasic</option>				<option value="bnf">bnf</option>				<option value="boo">Boo</option>-->								<option value="c" selected="selected">C</option><!--				<option value="c_loadrunner">C (LoadRunner)</option>				<option value="c_mac">C (Mac)</option>				<option value="caddcl">CAD DCL</option>				<option value="cadlisp">CAD Lisp</option>				<option value="cfdg">CFDG</option>				<option value="cfm">ColdFusion</option>				<option value="chaiscript">ChaiScript</option>				<option value="cil">CIL</option>				<option value="clojure">Clojure</option>				<option value="cmake">CMake</option>				<option value="cobol">COBOL</option>				<option value="coffeescript">CoffeeScript</option>-->				<option value="cpp">C++</option><!--								<option value="cpp-qt" class="sublang">&nbsp;&nbsp;C++ (Qt)</option>-->								<option value="csharp">C#</option>				<option value="css">CSS</option><!--								<option value="cuesheet">Cuesheet</option>				<option value="d">D</option>				<option value="dcl">DCL</option>				<option value="dcpu16">DCPU-16 Assembly</option>				<option value="dcs">DCS</option>				<option value="delphi">Delphi</option>				<option value="diff">Diff</option>				<option value="div">DIV</option>				<option value="dos">DOS</option>				<option value="dot">dot</option>				<option value="e">E</option>				<option value="ecmascript">ECMAScript</option>				<option value="eiffel">Eiffel</option>				<option value="email">eMail (mbox)</option>				<option value="epc">EPC</option>				<option value="erlang">Erlang</option>				<option value="euphoria">Euphoria</option>				<option value="f1">Formula One</option>				<option value="falcon">Falcon</option>				<option value="fo">FO (abas-ERP)</option>				<option value="fortran">Fortran</option>				<option value="freebasic">FreeBasic</option>				<option value="freeswitch">FreeSWITCH</option>				<option value="fsharp">F#</option>				<option value="gambas">GAMBAS</option>				<option value="gdb">GDB</option>				<option value="genero">genero</option>				<option value="genie">Genie</option>				<option value="gettext">GNU Gettext</option>				<option value="glsl">glSlang</option>				<option value="gml">GML</option>				<option value="gnuplot">Gnuplot</option>				<option value="go">Go</option>				<option value="groovy">Groovy</option>				<option value="gwbasic">GwBasic</option>				<option value="haskell">Haskell</option>				<option value="haxe">Haxe</option>				<option value="hicest">HicEst</option>				<option value="hq9plus">HQ9+</option>-->								<option value="html4strict">HTML</option>				<option value="html5">&nbsp;&nbsp;HTML5</option><!--								<option value="icon">Icon</option>				<option value="idl">Uno Idl</option>				<option value="ini">INI</option>				<option value="inno">Inno</option>				<option value="intercal">INTERCAL</option>				<option value="io">Io</option>				<option value="j">J</option>-->								<option value="java">Java</option>				<option value="java5">&nbsp;&nbsp;Java SE 5 and higher</option>				<option value="javascript">Javascript</option>				<option value="jquery">jQuery</option><!--								<option value="kixtart">KiXtart</option>				<option value="klonec">KLone C</option>				<option value="klonecpp">KLone C++</option>				<option value="latex">LaTeX</option>				<option value="lb">Liberty BASIC</option>				<option value="ldif">LDIF</option>				<option value="lisp">Lisp</option>				<option value="llvm">LLVM Intermediate Representation</option>				<option value="locobasic">Locomotive Basic</option>				<option value="logtalk">Logtalk</option>				<option value="lolcode">LOLcode</option>				<option value="lotusformulas">Lotus Notes @Formulas</option>				<option value="lotusscript">LotusScript</option>				<option value="lscript">LScript</option>				<option value="lsl2">LSL2</option>				<option value="lua">Lua</option>				<option value="m68k">Motorola 68000 Assembler</option>				<option value="magiksf">MagikSF</option>-->								<option value="make">GNU make</option><!--								<option value="mapbasic">MapBasic</option>				<option value="matlab">Matlab M</option>				<option value="mirc">mIRC Scripting</option>				<option value="mmix">MMIX</option>				<option value="modula2">Modula-2</option>				<option value="modula3">Modula-3</option>				<option value="mpasm">Microchip Assembler</option>				<option value="mxml">MXML</option>-->								<option value="mysql">MySQL</option><!--								<option value="nagios">Nagios</option>				<option value="netrexx">Rexx</option>				<option value="newlisp">newlisp</option>				<option value="nsis">NSIS</option>				<option value="oberon2">Oberon-2</option>				<option value="objc">Objective-C</option>				<option value="objeck">Objeck Programming Language</option>				<option value="ocaml">OCaml</option>				<option value="ocaml-brief" class="sublang">&nbsp;&nbsp;OCaml (brief)</option>				<option value="octave">GNU Octave</option>				<option value="oobas">OpenOffice.org Basic</option>				<option value="oorexx">Rexx</option>				<option value="oracle11">Oracle 11 SQL</option>				<option value="oracle8">Oracle 8 SQL</option>				<option value="oxygene">Oxygene (Delphi Prism)</option>				<option value="oz">OZ</option>				<option value="parigp">PARI/GP</option>				<option value="pascal">Pascal</option>				<option value="pcre">PCRE</option>				<option value="per">per</option>-->								<option value="perl">Perl</option>				<option value="perl6">&nbsp;&nbsp;Perl 6</option><!--								<option value="pf">OpenBSD Packet Filter</option>-->								<option value="php">PHP</option>				<option value="php-brief" class="sublang">&nbsp;&nbsp;PHP (brief)</option><!--								<option value="pic16">PIC16</option>				<option value="pike">Pike</option>				<option value="pixelbender">Pixel Bender 1.0</option>				<option value="pli">PL/I</option>-->								<option value="plsql">PL/SQL</option>				<option value="postgresql">PostgreSQL</option><!--				<option value="povray">POVRAY</option>				<option value="powerbuilder">PowerBuilder</option>				<option value="powershell">PowerShell</option>				<option value="proftpd">ProFTPd configuration</option>				<option value="progress">Progress</option>				<option value="prolog">Prolog</option>				<option value="properties">PROPERTIES</option>				<option value="providex">ProvideX</option>				<option value="purebasic">PureBasic</option>-->								<option value="python">Python</option>				<option value="pycon">&nbsp;&nbsp;Python (console mode)</option>				<option value="pys60">&nbsp;&nbsp;Python for S60</option><!--								<option value="q">q/kdb+</option>-->								<option value="qbasic">QBasic/QuickBASIC</option>				<option value="rails">Rails</option><!--								<option value="rebol">REBOL</option>-->								<option value="reg">Microsoft Registry</option><!--								<option value="rexx">Rexx</option>-->								<option value="robots">robots.txt</option><!--								<option value="rpmspec">RPM Specification File</option>				<option value="rsplus">R / S+</option>-->								<option value="ruby">Ruby</option><!--								<option value="sas">SAS</option>-->								<option value="scala">Scala</option><!--								<option value="scheme">Scheme</option>				<option value="scilab">SciLab</option>				<option value="sdlbasic">sdlBasic</option>				<option value="smalltalk">Smalltalk</option>-->								<option value="smarty">Smarty</option>				<option value="spark">SPARK</option>				<option value="sparql">SPARQL</option>				<option value="sql">SQL</option><!--								<option value="stonescript">StoneScript</option>				<option value="systemverilog">SystemVerilog</option>				<option value="tcl">TCL</option>				<option value="teraterm">Tera Term Macro</option>-->								<option value="text">Text</option><!--								<option value="thinbasic">thinBasic</option>-->								<option value="tsql">T-SQL</option><!--								<option value="typoscript">TypoScript</option>				<option value="unicon">Unicon</option>				<option value="upc">UPC</option>				<option value="urbi">Urbi</option>				<option value="uscript">Unreal Script</option>				<option value="vala">Vala</option>-->								<option value="vb">Visual Basic 6 and older</option>				<option value="vbnet">Visual Basic.NET</option><!--								<option value="vedit">Vedit macro language</option>				<option value="verilog">Verilog</option>				<option value="vhdl">VHDL</option>				<option value="vim">Vim Script</option>				<option value="visualfoxpro">Visual Fox Pro</option>				<option value="visualprolog">Visual Prolog</option>				<option value="whitespace">Whitespace</option>				<option value="whois">Whois (RPSL format)</option>				<option value="winbatch">Winbatch</option>				<option value="xbasic">XBasic</option>-->								<option value="xml">XML</option><!--								<option value="xorg_conf">Xorg configuration</option>				<option value="xpp">X++</option>				<option value="yaml">YAML</option>				<option value="z80">ZiLOG Z80 Assembler</option>				<option value="zxbasic">ZXBasic</option>			-->			
			</select>
			
			<label class="formposttocodeshare">Code</label>
			<textarea class="formposttocodeshare" id="txtcode" name="code"></textarea>

			<label class="formposttocodeshare">Note</label>
			<textarea class="formposttocodeshare" id="txtnote" name="note"></textarea>
			
			<input class="formposttocodeshare" type="submit" name="submit" value="Post" />
		</form>
	</body>
</html>